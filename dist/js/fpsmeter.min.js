!function(t,e){function n(t,e){for(var n in e)try{t.style[n]=e[n]}catch(t){}return t}function o(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":typeof t}function a(t,e){if("array"!==o(e))return-1;if(e.indexOf)return e.indexOf(t);for(var n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1}function i(){var t,e=arguments;for(t in e[1])if(e[1].hasOwnProperty(t))switch(o(e[1][t])){case"object":e[0][t]=i({},e[0][t],e[1][t]);break;case"array":e[0][t]=e[1][t].slice(0);break;default:e[0][t]=e[1][t]}return 2<e.length?i.apply(null,[e[0]].concat(Array.prototype.slice.call(e,2))):e[0]}function r(t){return t=Math.round(255*t).toString(16),1===t.length?"0"+t:t}function h(t,e,n,o){t.addEventListener?t[o?"removeEventListener":"addEventListener"](e,n,!1):t.attachEvent&&t[o?"detachEvent":"attachEvent"]("on"+e,n)}function l(t,s){function d(t,e,n,o){return S[0|t][Math.round(Math.min((e-n)/(o-n)*q,q))]}function g(){j.legend.fps!==G&&(j.legend.fps=G,j.legend[f]=G?"FPS":"ms"),E=G?H.fps:H.duration,j.count[f]=999<E?"999+":E.toFixed(99<E?0:T.decimals)}function m(){for(F=c(),N<F-T.threshold&&(H.fps-=H.fps/Math.max(1,60*T.smoothing/T.interval),H.duration=1e3/H.fps),A=T.history;A--;)V[A]=0===A?H.fps:V[A-1],W[A]=0===A?H.duration:W[A-1];if(g(),T.heat){if(D.length)for(A=D.length;A--;)D[A].el.style[O[D[A].name].heatOn]=G?d(O[D[A].name].heatmap,H.fps,0,T.maxFps):d(O[D[A].name].heatmap,H.duration,T.threshold,0);if(j.graph&&O.column.heatOn)for(A=I.length;A--;)I[A].style[O.column.heatOn]=G?d(O.column.heatmap,V[A],0,T.maxFps):d(O.column.heatmap,W[A],T.threshold,0)}if(j.graph)for(P=0;P<T.history;P++)I[P].style.height=(G?V[P]?Math.round(z/T.maxFps*Math.min(V[P],T.maxFps)):0:W[P]?Math.round(z/T.threshold*Math.min(W[P],T.threshold)):0)+"px"}function w(){20>T.interval?(C=u(w),m()):(C=setTimeout(w,T.interval),M=u(m))}function v(t){t=t||window.event,t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0),H.toggle()}function y(){T.toggleOn&&h(j.container,T.toggleOn,v,1),t.removeChild(j.container)}function k(){if(j.container&&y(),O=l.theme[T.theme],S=O.compiledHeatmaps||[],!S.length&&O.heatmaps.length){for(P=0;P<O.heatmaps.length;P++)for(S[P]=[],A=0;A<=q;A++){var e,o=S[P],a=A;e=.33/q*A;var i=O.heatmaps[P].saturation,c=O.heatmaps[P].lightness,s=void 0,p=void 0,u=void 0,d=u=void 0,m=s=p=void 0,m=void 0,u=.5>=c?c*(1+i):c+i-c*i;0===u?e="#000":(d=2*c-u,p=(u-d)/u,e*=6,s=Math.floor(e),m=e-s,m*=u*p,0===s||6===s?(s=u,p=d+m,u=d):1===s?(s=u-m,p=u,u=d):2===s?(s=d,p=u,u=d+m):3===s?(s=d,p=u-m):4===s?(s=d+m,p=d):(s=u,p=d,u-=m),e="#"+r(s)+r(p)+r(u)),o[a]=e}O.compiledHeatmaps=S}j.container=n(document.createElement("div"),O.container),j.count=j.container.appendChild(n(document.createElement("div"),O.count)),j.legend=j.container.appendChild(n(document.createElement("div"),O.legend)),j.graph=T.graph?j.container.appendChild(n(document.createElement("div"),O.graph)):0,D.length=0;for(var f in j)j[f]&&O[f].heatOn&&D.push({name:f,el:j[f]});if(I.length=0,j.graph)for(j.graph.style.width=T.history*O.column.width+(T.history-1)*O.column.spacing+"px",A=0;A<T.history;A++)I[A]=j.graph.appendChild(n(document.createElement("div"),O.column)),I[A].style.position="absolute",I[A].style.bottom=0,I[A].style.right=A*O.column.width+A*O.column.spacing+"px",I[A].style.width=O.column.width+"px",I[A].style.height="0px";n(j.container,T),g(),t.appendChild(j.container),j.graph&&(z=j.graph.clientHeight),T.toggleOn&&("click"===T.toggleOn&&(j.container.style.cursor="pointer"),h(j.container,T.toggleOn,v))}"object"===o(t)&&t.nodeType===e&&(s=t,t=document.body),t||(t=document.body);var O,S,F,C,M,z,E,A,P,H=this,T=i({},l.defaults,s||{}),j={},I=[],q=100,D=[],L=0,R=T.threshold,B=0,N=c()-R,V=[],W=[],G="fps"===T.show;H.options=T,H.fps=0,H.duration=0,H.isPaused=0,H.tickStart=function(){B=c()},H.tick=function(){F=c(),L=F-N,R+=(L-R)/T.smoothing,H.fps=1e3/R,H.duration=B<N?R:F-B,N=F},H.pause=function(){return C&&(H.isPaused=1,clearTimeout(C),p(C),p(M),C=M=0),H},H.resume=function(){return C||(H.isPaused=0,w()),H},H.set=function(t,e){return T[t]=e,G="fps"===T.show,-1!==a(t,x)&&k(),-1!==a(t,b)&&n(j.container,T),H},H.showDuration=function(){return H.set("show","ms"),H},H.showFps=function(){return H.set("show","fps"),H},H.toggle=function(){return H.set("show",G?"ms":"fps"),H},H.hide=function(){return H.pause(),j.container.style.display="none",H},H.show=function(){return H.resume(),j.container.style.display="block",H},H.destroy=function(){H.pause(),y(),H.tick=H.tickStart=function(){}},k(),w()}var c,s=t.performance;c=s&&(s.now||s.webkitNow)?s[s.now?"now":"webkitNow"].bind(s):function(){return+new Date};for(var p=t.cancelAnimationFrame||t.cancelRequestAnimationFrame,u=t.requestAnimationFrame,s=["moz","webkit","o"],d=0,g=0,m=s.length;g<m&&!p;++g)u=(p=t[s[g]+"CancelAnimationFrame"]||t[s[g]+"CancelRequestAnimationFrame"])&&t[s[g]+"RequestAnimationFrame"];p||(u=function(e){var n=c(),o=Math.max(0,16-(n-d));return d=n+o,t.setTimeout(function(){e(n+o)},o)},p=function(t){clearTimeout(t)});var f="string"===o(document.createElement("div").textContent)?"textContent":"innerText";l.extend=i,window.FPSMeter=l,l.defaults={interval:100,smoothing:10,show:"fps",toggleOn:"click",decimals:1,maxFps:60,threshold:100,position:"absolute",zIndex:10,left:"5px",top:"5px",right:"auto",bottom:"auto",margin:"0 0 0 0",theme:"dark",heat:0,graph:0,history:20};var x=["toggleOn","theme","heat","graph","history"],b="position zIndex left top right bottom margin".split(" ")}(window),function(t,e){e.theme={};var n=e.theme.base={heatmaps:[],container:{heatOn:null,heatmap:null,padding:"5px",minWidth:"95px",height:"30px",lineHeight:"30px",textAlign:"right",textShadow:"none"},count:{heatOn:null,heatmap:null,position:"absolute",top:0,right:0,padding:"5px 10px",height:"30px",fontSize:"24px",fontFamily:"Consolas, Andale Mono, monospace",zIndex:2},legend:{heatOn:null,heatmap:null,position:"absolute",top:0,left:0,padding:"5px 10px",height:"30px",fontSize:"12px",lineHeight:"32px",fontFamily:"sans-serif",textAlign:"left",zIndex:2},graph:{heatOn:null,heatmap:null,position:"relative",boxSizing:"padding-box",MozBoxSizing:"padding-box",height:"100%",zIndex:1},column:{width:4,spacing:1,heatOn:null,heatmap:null}};e.theme.dark=e.extend({},n,{heatmaps:[{saturation:.8,lightness:.8}],container:{background:"#222",color:"#fff",border:"1px solid #1a1a1a",textShadow:"1px 1px 0 #222"},count:{heatOn:"color"},column:{background:"#3f3f3f"}}),e.theme.light=e.extend({},n,{heatmaps:[{saturation:.5,lightness:.5}],container:{color:"#666",background:"#fff",textShadow:"1px 1px 0 rgba(255,255,255,.5), -1px -1px 0 rgba(255,255,255,.5)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},count:{heatOn:"color"},column:{background:"#eaeaea"}}),e.theme.colorful=e.extend({},n,{heatmaps:[{saturation:.5,lightness:.6}],container:{heatOn:"backgroundColor",background:"#888",color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.2)",boxShadow:"0 0 0 1px rgba(0,0,0,.1)"},column:{background:"#777",backgroundColor:"rgba(0,0,0,.2)"}}),e.theme.transparent=e.extend({},n,{heatmaps:[{saturation:.8,lightness:.5}],container:{padding:0,color:"#fff",textShadow:"1px 1px 0 rgba(0,0,0,.5)"},count:{padding:"0 5px",height:"40px",lineHeight:"40px"},legend:{padding:"0 5px",height:"40px",lineHeight:"42px"},graph:{height:"40px"},column:{width:5,background:"#999",heatOn:"backgroundColor",opacity:.5}})}(window,FPSMeter);